<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Resume Builder | Nexus CV</title>
    <meta name="description"
        content="Build an ATS-optimized, recruiter-friendly resume with AI. Fill in your details and let Nexus CV generate a professional PDF.">
    <meta property="og:title" content="AI Resume Builder | Nexus CV">
    <meta property="og:description" content="Generate ATS-optimized resumes with AI assistance.">
    <meta property="og:image" content="/static/og-image.png">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="canonical" href="/resume-builder">
    <link rel="icon" href="/static/favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    <script src="/static/theme.js"></script>

    <!-- NAVBAR -->
    <nav class="navbar">
        <button onclick="toggleTheme()" class="btn outline">üåô</button>
        <div>
            <span class="brand-main">Resume</span><span class="brand-accent">IQ</span>
        </div>

        {% if session.get("user") %}
        <div class="profile">
            <div class="avatar" onclick="toggleMenu()">
                {{ session["user"][0]|upper }}
            </div>
            <div id="menu" class="menu">
                <a href="/">Home</a>
                <a href="/history">History</a>
                <a href="/upload-page">Upload Resume</a>
                <a href="/compare-resume">Compare Resumes</a>
                <a href="/resume-builder">Build Resume</a>
                <a href="/download-pdf">Download Report</a>
                <a href="/logout">Logout</a>
            </div>
        </div>
        {% else %}
        <div>
            <a href="/login" class="btn outline">Login</a>
            <a href="/register" class="btn">Register</a>
        </div>
        {% endif %}
    </nav>

    <!-- FLASH MESSAGES -->
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="container" style="margin-top:10px; margin-bottom:-20px;">
        {% for category, message in messages %}
        <div class="flash-message flash-{{ category }}">
            ‚ö†Ô∏è {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}

    <!-- FORM -->
    <div class="container">
        <h1 style="text-align:center;">AI Resume Builder</h1>
        <p style="text-align:center; opacity:0.8; margin-bottom:30px;">
            Fill in your details below. We'll generate an ATS-optimized, recruiter-friendly resume.
        </p>

        <form action="/generate-resume" method="post" class="builder-form">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

            <!-- PERSONAL INFO -->
            <section class="card builder-section">
                <h3>üë§ Personal Information</h3>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="full_name">Full Name *</label>
                        <input type="text" id="full_name" name="full_name" value="{{ prefill.get('name', '') }}"
                            required placeholder="John Doe">
                    </div>
                    <div class="form-group">
                        <label for="email">Email *</label>
                        <input type="email" id="email" name="email" value="{{ prefill.get('email', '') }}" required
                            placeholder="john@example.com">
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone *</label>
                        <input type="tel" id="phone" name="phone" value="{{ prefill.get('phone', '') }}" required
                            placeholder="+91 9876543210">
                    </div>
                    <div class="form-group">
                        <label for="linkedin">LinkedIn URL</label>
                        <input type="url" id="linkedin" name="linkedin" value="{{ prefill.get('linkedin', '') }}"
                            placeholder="https://linkedin.com/in/johndoe">
                    </div>
                    <div class="form-group">
                        <label for="github">GitHub URL</label>
                        <input type="url" id="github" name="github" value="{{ prefill.get('github', '') }}"
                            placeholder="https://github.com/johndoe">
                    </div>
                    <div class="form-group">
                        <label for="portfolio">Portfolio (Optional)</label>
                        <input type="url" id="portfolio" name="portfolio" value="{{ prefill.get('portfolio', '') }}"
                            placeholder="https://johndoe.dev">
                    </div>
                </div>
            </section>

            <!-- TARGET ROLE -->
            <section class="card builder-section">
                <h3>üéØ Target Role</h3>
                <div class="form-group">
                    <label for="target_role">Select your target job role (recommended for better ATS score)</label>
                    <select id="target_role" name="target_role" class="form-select">
                        <option value="">Auto-detect from skills</option>
                        <option value="Software Engineer" {{ 'selected' if
                            prefill.get('target_role')=='Software Engineer' }}>Software Engineer</option>
                        <option value="Web Developer" {{ 'selected' if prefill.get('target_role')=='Web Developer' }}>
                            Web Developer</option>
                        <option value="Backend Developer" {{ 'selected' if
                            prefill.get('target_role')=='Backend Developer' }}>Backend Developer</option>
                        <option value="Data Analyst" {{ 'selected' if prefill.get('target_role')=='Data Analyst' }}>Data
                            Analyst</option>
                        <option value="ML Engineer" {{ 'selected' if prefill.get('target_role')=='ML Engineer' }}>ML
                            Engineer</option>
                    </select>
                </div>
            </section>

            <!-- CAREER OBJECTIVE -->
            <section class="card builder-section">
                <h3>üéØ Career Objective</h3>
                <div class="form-group">
                    <label for="career_objective">Write a brief 2-3 line career objective *</label>
                    <textarea id="career_objective" name="career_objective" rows="3" required
                        placeholder="Results-driven software engineer with 3+ years of experience...">{{ prefill.get('career_objective', '') }}</textarea>
                </div>
            </section>

            <!-- EDUCATION -->
            <section class="card builder-section">
                <h3>üéì Education</h3>
                <div id="education-entries">
                    {% if prefill.get('education') %}
                    {% for edu in prefill.education %}
                    <div class="dynamic-entry">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Degree *</label>
                                <input type="text" name="edu_degree[]" value="{{ edu.degree }}" required
                                    placeholder="B.Tech Computer Science">
                            </div>
                            <div class="form-group">
                                <label>Institution</label>
                                <input type="text" name="edu_institution[]" value="{{ edu.institution }}"
                                    placeholder="MIT">
                            </div>
                            <div class="form-group">
                                <label>Year</label>
                                <input type="text" name="edu_year[]" value="{{ edu.year }}" placeholder="2020‚Äì2024">
                            </div>
                        </div>
                        <button type="button" class="btn-remove" onclick="removeEntry(this)">‚úï</button>
                    </div>
                    {% endfor %}
                    {% else %}
                    <div class="dynamic-entry">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Degree *</label>
                                <input type="text" name="edu_degree[]" required placeholder="B.Tech Computer Science">
                            </div>
                            <div class="form-group">
                                <label>Institution</label>
                                <input type="text" name="edu_institution[]" placeholder="MIT">
                            </div>
                            <div class="form-group">
                                <label>Year</label>
                                <input type="text" name="edu_year[]" placeholder="2020‚Äì2024">
                            </div>
                        </div>
                        <button type="button" class="btn-remove" onclick="removeEntry(this)">‚úï</button>
                    </div>
                    {% endif %}
                </div>
                <button type="button" class="btn-add" onclick="addEducation()">+ Add Education</button>
            </section>

            <!-- WORK EXPERIENCE -->
            <section class="card builder-section">
                <h3>üíº Work Experience</h3>
                <div id="experience-entries">
                    {% if prefill.get('experience') %}
                    {% for exp in prefill.experience %}
                    <div class="dynamic-entry">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Job Title</label>
                                <input type="text" name="exp_title[]" value="{{ exp.title }}"
                                    placeholder="Software Developer">
                            </div>
                            <div class="form-group">
                                <label>Company</label>
                                <input type="text" name="exp_company[]" value="{{ exp.company }}" placeholder="Google">
                            </div>
                            <div class="form-group">
                                <label>Duration</label>
                                <input type="text" name="exp_duration[]" value="{{ exp.duration }}"
                                    placeholder="Jan 2023 ‚Äì Present">
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:8px;">
                            <label>Description (one point per line)</label>
                            <textarea name="exp_description[]" rows="3"
                                placeholder="Built RESTful APIs using Flask&#10;Optimized database queries reducing latency by 40%">{{ exp.bullets|join('\n') }}</textarea>
                        </div>
                        <button type="button" class="btn-remove" onclick="removeEntry(this)">‚úï</button>
                    </div>
                    {% endfor %}
                    {% else %}
                    <div class="dynamic-entry">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Job Title</label>
                                <input type="text" name="exp_title[]" placeholder="Software Developer">
                            </div>
                            <div class="form-group">
                                <label>Company</label>
                                <input type="text" name="exp_company[]" placeholder="Google">
                            </div>
                            <div class="form-group">
                                <label>Duration</label>
                                <input type="text" name="exp_duration[]" placeholder="Jan 2023 ‚Äì Present">
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:8px;">
                            <label>Description (one point per line)</label>
                            <textarea name="exp_description[]" rows="3"
                                placeholder="Built RESTful APIs using Flask&#10;Optimized database queries reducing latency by 40%"></textarea>
                        </div>
                        <button type="button" class="btn-remove" onclick="removeEntry(this)">‚úï</button>
                    </div>
                    {% endif %}
                </div>
                <button type="button" class="btn-add" onclick="addExperience()">+ Add Experience</button>
            </section>

            <!-- PROJECTS -->
            <section class="card builder-section">
                <h3>üöÄ Projects</h3>
                <div id="project-entries">
                    {% if prefill.get('projects') %}
                    {% for proj in prefill.projects %}
                    <div class="dynamic-entry">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Project Name</label>
                                <input type="text" name="proj_name[]" value="{{ proj.name }}"
                                    placeholder="AI Resume Analyzer">
                            </div>
                            <div class="form-group">
                                <label>Technologies Used</label>
                                <input type="text" name="proj_tech[]" value="{{ proj.tech }}"
                                    placeholder="Python, Flask, ML">
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:8px;">
                            <label>Description (one point per line)</label>
                            <textarea name="proj_description[]" rows="3"
                                placeholder="Developed an NLP-based resume parser&#10;Integrated ATS scoring with 95% accuracy">{{ proj.bullets|join('\n') }}</textarea>
                        </div>
                        <button type="button" class="btn-remove" onclick="removeEntry(this)">‚úï</button>
                    </div>
                    {% endfor %}
                    {% else %}
                    <div class="dynamic-entry">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Project Name</label>
                                <input type="text" name="proj_name[]" placeholder="AI Resume Analyzer">
                            </div>
                            <div class="form-group">
                                <label>Technologies Used</label>
                                <input type="text" name="proj_tech[]" placeholder="Python, Flask, ML">
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:8px;">
                            <label>Description (one point per line)</label>
                            <textarea name="proj_description[]" rows="3"
                                placeholder="Developed an NLP-based resume parser&#10;Integrated ATS scoring with 95% accuracy"></textarea>
                        </div>
                        <button type="button" class="btn-remove" onclick="removeEntry(this)">‚úï</button>
                    </div>
                    {% endif %}
                </div>
                <button type="button" class="btn-add" onclick="addProject()">+ Add Project</button>
            </section>

            <!-- SKILLS -->
            <section class="card builder-section">
                <h3>üõ† Skills</h3>
                <div class="form-group">
                    <label for="skills">Technical Skills (comma separated) *</label>
                    <textarea id="skills" name="skills" rows="2" required
                        placeholder="Python, JavaScript, Flask, React, SQL, Git, Machine Learning">{{ prefill.get('skills_list', [])|join(', ') }}</textarea>
                </div>
            </section>

            <!-- CERTIFICATIONS -->
            <section class="card builder-section">
                <h3>üìú Certifications (Optional)</h3>
                <div class="form-group">
                    <label for="certifications">One per line (max 3 shown on resume)</label>
                    <textarea id="certifications" name="certifications" rows="3"
                        placeholder="AWS Certified Solutions Architect&#10;Google TensorFlow Developer Certificate">{{ prefill.get('certifications', '') }}</textarea>
                </div>
            </section>

            <!-- ACHIEVEMENTS -->
            <section class="card builder-section">
                <h3>üèÜ Achievements (Optional)</h3>
                <div class="form-group">
                    <label for="achievements">One per line (max 3 shown on resume)</label>
                    <textarea id="achievements" name="achievements" rows="3"
                        placeholder="Won first prize at National Hackathon 2024&#10;Published research paper in IEEE">{{ prefill.get('achievements', '') }}</textarea>
                </div>
            </section>

            <!-- SUBMIT -->
            <div style="text-align:center; margin: 30px 0 60px;">
                <button type="submit" class="btn large">üöÄ Generate Resume</button>
            </div>

        </form>
    </div>

    <!-- DYNAMIC ENTRY JAVASCRIPT -->
    <script>
        function removeEntry(btn) {
            const entry = btn.closest('.dynamic-entry');
            const container = entry.parentElement;
            if (container.querySelectorAll('.dynamic-entry').length > 1) {
                entry.remove();
            }
        }

        function addEducation() {
            const container = document.getElementById('education-entries');
            const html = `
    <div class="dynamic-entry">
        <div class="form-grid">
            <div class="form-group">
                <label>Degree *</label>
                <input type="text" name="edu_degree[]" required placeholder="M.Sc Data Science">
            </div>
            <div class="form-group">
                <label>Institution</label>
                <input type="text" name="edu_institution[]" placeholder="Stanford University">
            </div>
            <div class="form-group">
                <label>Year</label>
                <input type="text" name="edu_year[]" placeholder="2024‚Äì2026">
            </div>
        </div>
        <button type="button" class="btn-remove" onclick="removeEntry(this)">‚úï</button>
    </div>`;
            container.insertAdjacentHTML('beforeend', html);
        }

        function addExperience() {
            const container = document.getElementById('experience-entries');
            const html = `
    <div class="dynamic-entry">
        <div class="form-grid">
            <div class="form-group">
                <label>Job Title</label>
                <input type="text" name="exp_title[]" placeholder="Software Developer">
            </div>
            <div class="form-group">
                <label>Company</label>
                <input type="text" name="exp_company[]" placeholder="Amazon">
            </div>
            <div class="form-group">
                <label>Duration</label>
                <input type="text" name="exp_duration[]" placeholder="Jun 2022 ‚Äì Dec 2023">
            </div>
        </div>
        <div class="form-group" style="margin-top:8px;">
            <label>Description (one point per line)</label>
            <textarea name="exp_description[]" rows="3" placeholder="Designed microservices architecture&#10;Reduced deployment time by 50%"></textarea>
        </div>
        <button type="button" class="btn-remove" onclick="removeEntry(this)">‚úï</button>
    </div>`;
            container.insertAdjacentHTML('beforeend', html);
        }

        function addProject() {
            const container = document.getElementById('project-entries');
            const html = `
    <div class="dynamic-entry">
        <div class="form-grid">
            <div class="form-group">
                <label>Project Name</label>
                <input type="text" name="proj_name[]" placeholder="E-Commerce Platform">
            </div>
            <div class="form-group">
                <label>Technologies Used</label>
                <input type="text" name="proj_tech[]" placeholder="React, Node.js, MongoDB">
            </div>
        </div>
        <div class="form-group" style="margin-top:8px;">
            <label>Description (one point per line)</label>
            <textarea name="proj_description[]" rows="3" placeholder="Built real-time notification system&#10;Implemented payment gateway integration"></textarea>
        </div>
        <button type="button" class="btn-remove" onclick="removeEntry(this)">‚úï</button>
    </div>`;
            container.insertAdjacentHTML('beforeend', html);
        }
    </script>

</body>

</html>